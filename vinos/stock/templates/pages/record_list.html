{% extends "pages/base.html" %}
{% load static %}
{% load custom_tags %}

{% block title %}{{title}}{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'web/styles/record_list.css' %}"> 
{% endblock %}

{% block main %}
    <div class="record-list">
        <div class="record-item">
            <h2>{{title}}</h2>
            <a href="{{ btn_order.url }}">{{ btn_order.label }}</a>
            {% if not user|has_group:"Managers" %}
            <a href="{% url 'add_record' 'entry' %}">Nueva Entrada</a>
            <a href="{% url 'add_record' 'exit' %}">Nueva Salida</a>
            {% endif %}
        </div>
        {% for record in records %}
            <div class="record-item">
                <h2>{% if record.typeof == 'entry' %}
                Entrada
                {% else %}
                Salida
                {% endif %}</h2>
                <p><strong>Fecha:</strong> {{ record.date }}</p>
                <p><strong>Producto:</strong> Cod.: {{ record.product.id }} {{ record.product.name }} - {{ record.product.variety }} x {{ record.quantity }} </p>
                <p{% if record.branch == employee.branch %} class="highlight" {% endif %}><strong>Sucursal:</strong> {{ record.branch }}</p>
                <p{% if record.employee == employee %} class="highlight" {% endif %}><strong>Empleado:</strong> {{ record.employee.user.username }} - {{ record.employee.user.email }}</p>
            </div>
        {% empty %}
            <div class="record-item">
                <p>No hay registros disponibles.</p>
            </div>
        {% endfor %}
    </div>
{% endblock %}